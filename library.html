<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Library System</title>

<style>
* {
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    padding: 40px;
}

h1 {
    text-align: center;
    color: white;
    margin-bottom: 40px;
}

.library {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 25px;
    max-width: 1400px;
    margin: auto;
}

.book-card {
    background: white;
    border-radius: 14px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.25);
    overflow: hidden;
}

.book-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
}

.book-content {
    padding: 20px;
}

.book-content h3 {
    margin: 0 0 8px;
    color: #2a5298;
}

.status {
    font-weight: bold;
    margin: 10px 0;
}

.available { color: green; }
.not-available { color: red; }

.quantity {
    font-size: 14px;
    margin-bottom: 10px;
}

button {
    width: 100%;
    margin-top: 10px;
    padding: 10px;
    border: none;
    border-radius: 6px;
    background: #2a5298;
    color: white;
    cursor: pointer;
}

button:hover {
    background: #1e3c72;
}

.cart {
    background: white;
    max-width: 400px;
    margin: 0 auto 40px;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}

.cart ul {
    list-style: none;
    padding: 0;
}

.cart li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ddd;
    padding: 8px 0;
}
</style>
</head>

<body>

<h1>Sphinx Library</h1>

<div class="cart">
    <h2>Cart</h2>
    <ul id="cart-items"></ul>
    <button onclick="checkout()">Checkout</button>
</div>

<div class="library">

<div class="book-card" data-id="101" data-title="Introduction to Programming" data-brief="Basic programming concepts." data-qty="5">
<img src="https://m.media-amazon.com/images/I/51rHVOum7hL.jpg">
<div class="book-content">
<h3>Book ID: 101</h3>
<p><strong>Title:</strong> Introduction to Programming</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="102" data-title="Data Structures" data-brief="Data structures and algorithms." data-qty="0">
<img src="https://m.media-amazon.com/images/I/81hv09UkxLL._SL1500_.jpg">
<div class="book-content">
<h3>Book ID: 102</h3>
<p><strong>Title:</strong> Data Structures</p>
<p class="status not-available">Not Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="103" data-title="Database Systems" data-brief="Databases and SQL." data-qty="5">
<img src="https://www.cengage.com/covers/imageServlet?image_type=LRGFC&catalog=cengage&epi=14494545953044442581643757572249316733">
<div class="book-content">
<h3>Book ID: 103</h3>
<p><strong>Title:</strong> Database Systems</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="104" data-title="Software Engineering" data-brief="SDLC and UML." data-qty="0">
<img src="https://m.media-amazon.com/images/I/81sji+WquSL._SL1500_.jpg">
<div class="book-content">
<h3>Book ID: 104</h3>
<p><strong>Title:</strong> Software Engineering</p>
<p class="status not-available">Not Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="105" data-title="Computer Networks" data-brief="Networking basics." data-qty="5">
<img src="https://prodimage.images-bn.com/pimages/9781719474825_p0_v3_s1200x630.jpg">
<div class="book-content">
<h3>Book ID: 105</h3>
<p><strong>Title:</strong> Computer Networks</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="106" data-title="Operating Systems" data-brief="Processes and memory." data-qty="5">
<img src="https://images-na.ssl-images-amazon.com/images/I/61VfXWzX1HL.jpg">
<div class="book-content">
<h3>Book ID: 106</h3>
<p><strong>Title:</strong> Operating Systems</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="107" data-title="Artificial Intelligence" data-brief="AI fundamentals." data-qty="5">
<img src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1677286399i/123006285.jpg">
<div class="book-content">
<h3>Book ID: 107</h3>
<p><strong>Title:</strong> Artificial Intelligence</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="108" data-title="Machine Learning" data-brief="ML concepts." data-qty="5">
<img src="https://1.bp.blogspot.com/-idcciX9qbUI/X94BOWyBSTI/AAAAAAAAJcY/jKtkS2AjXTALeML0UE6iy8ZLKMbaJEh8ACLcBGAsYHQ/s1360/61z%252B9WJfXtL._AC_SL1500_.jpg">
<div class="book-content">
<h3>Book ID: 108</h3>
<p><strong>Title:</strong> Machine Learning</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="109" data-title="Cyber Security" data-brief="Security basics." data-qty="5">
<img src="https://d28hgpri8am2if.cloudfront.net/book_images/onix/cvr9781948677080/the-secret-to-cybersecurity-9781948677080_hr.jpg">
<div class="book-content">
<h3>Book ID: 109</h3>
<p><strong>Title:</strong> Cyber Security</p>
<p class="status available">Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

<div class="book-card" data-id="110" data-title="Web Development" data-brief="HTML, CSS, JS." data-qty=0">
<img src="https://pictures.abebooks.com/isbn/9780134481265-us.jpg">
<div class="book-content">
<h3>Book ID: 110</h3>
<p><strong>Title:</strong> Web Development</p>
<p class="status not-available">Not Available</p>
<p class="quantity"></p>
<button onclick="openModal(this)">View</button>
</div>
</div>

</div>

<div id="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.6);">
<div style="background:#fff; max-width:500px; margin:10% auto; padding:20px; border-radius:10px;">
<h3 id="modal-title"></h3>
<p id="modal-brief"></p>
<button onclick="addFromModal('Borrow')">Borrow</button>
<button onclick="addFromModal('Purchase')">Purchase</button>
<button onclick="closeModal()">Close</button>
</div>
</div>

<script>
let currentBook = null;

document.querySelectorAll(".book-card").forEach(book => {
    const qty = parseInt(book.dataset.qty);
    book.querySelector(".quantity").textContent = "In Library: " + qty;
});

function openModal(btn){
    currentBook = btn.closest(".book-card");
    document.getElementById("modal-title").innerText = currentBook.dataset.title;
    document.getElementById("modal-brief").innerText = currentBook.dataset.brief;
    document.getElementById("modal").style.display = "block";
}

function closeModal(){
    document.getElementById("modal").style.display = "none";
}

function addFromModal(action){
    let qty = parseInt(currentBook.dataset.qty);
    if (qty <= 0) return alert("Book not available");

    qty--;
    currentBook.dataset.qty = qty;
    currentBook.querySelector(".quantity").textContent = "In Library: " + qty;

    if (qty === 0) {
        const status = currentBook.querySelector(".status");
        status.textContent = "Not Available";
        status.className = "status not-available";
    }

    const li = document.createElement("li");
    li.dataset.action = action;
    li.dataset.title = currentBook.dataset.title;

    const text = document.createElement("span");
    text.textContent = `${currentBook.dataset.title} | ${action}`;

    const cancel = document.createElement("span");
    cancel.textContent = "âœ–";
    cancel.style.cursor = "pointer";
    cancel.style.color = "red";
    cancel.onclick = () => li.remove();

    li.appendChild(text);
    li.appendChild(cancel);
    document.getElementById("cart-items").appendChild(li);

    closeModal();
}

function checkout(){
    const cart = document.getElementById("cart-items");
    if (!cart.children.length) {
        alert("Cart is empty");
        return;
    }

    for (const item of cart.children) {
        const bookId = item.dataset.bookId;
        const action = item.dataset.action;
        const book = document.querySelector(`.book-card[data-id="${bookId}"]`);

        let qty = parseInt(book.dataset.qty);
        if (qty <= 0) {
            alert("One or more books are no longer available.");
            return;
        }

        if (action === "Borrow") {
            // calendar picker
            const date = document.createElement("input");
            date.type = "date";
            if (!prompt("Select return date from calendar then press OK")) return;
        }

        // Deduct quantity
        qty--;
        book.dataset.qty = qty;
        book.querySelector(".quantity").textContent = "In Library: " + qty;

        if (qty === 0) {
            const status = book.querySelector(".status");
            status.textContent = "Not Available";
            status.className = "status not-available";
        }
    }

    alert("Checkout completed successfully");
    cart.innerHTML = "";
}
</script>



</body>
</html>
